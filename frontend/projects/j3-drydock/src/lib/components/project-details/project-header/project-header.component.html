<div jb-detail-top-section>
  <jb-details-top-section
    #detailsTopSection
    *ngIf="detailedData"
    [topFieldsConfig]="topFieldsConfig"
    [detailsData]="detailedData"
    [canEdit]="canEdit"
    (onCreate)="onFormCreate($event)"
    (onValueChange)="onValueChange($event)"
  >
    <div
      class="header-actions"
      jb-workflow-section
    >
      <jb-workflow-actions
        [isWorkflowButtonEnable]="isWorkflowButtonEnable"
        [isWorkflowDisable]="false"
        [disableSave]="!isValueChange"
        [isCustomThreeDots]="false"
        [showSaveButton]="isShowSaveButton"
        saveButtonType="NoButton"
        [jobDetails]="detailedData"
        [exportEnable]="isOpenExport"
        [functionCode]="detailedData.functionCode"
        [moduleCode]="detailedData.moduleCode"
        [workListType]="detailedData.ProjectTypeCode"
        [showWorkflowAction]="true"
        [workflowActionData]="nextWorkflowData"
        [threeDotsActions]="threeDotsActions"
        [threeDotsActionsShow]="threeDotsActionsShow"
        (threeDotOptionClick)="onThreeDotActionClicked($event)"
        (saveActionClick)="onSave()"
        (workflowActionClick)="onGoToNextStatusClicked($event.actionName)"
      ></jb-workflow-actions>
    </div>
  </jb-details-top-section>
</div>
<!-- TODO can move it to separte component -->
<jb-dialog
  [(dialogVisible)]="isConfirmationPopupVisible"
  [dialogContent]="confirmationPopup"
  (closeDialog)="onCloseConfirmationPopup()"
>
  <div jb-dialog-body>
    <form [formGroup]="confirmationForm">
      <jb-textarea [content]="confirmationMessageSettings"></jb-textarea>
    </form>
  </div>
  <ng-container jb-dialog-footer>
    <jb-dialog-footer
      [okBtnLabel]="confirmationPopupOkBtnLabel"
      (ok)="onConfirmationPopupOk()"
      (cancel)="onConfirmationPopupCancel()"
    ></jb-dialog-footer>
  </ng-container>
</jb-dialog>

<jb-drydock-simple-confirmation-popup
  [config]="{ dialogHeader: 'Skip Workflow' }"
  [isOpen]="isSkipWorkflowPopupVisible"
  (confirmed)="onSkipWorkflowPopupConfirm($event)"
>
  <span>Are you sure want to change the status of this record to {{ lastWorkflowType }} with its child records if any ?</span>
</jb-drydock-simple-confirmation-popup>

<jb-drydock-simple-confirmation-popup
  [config]="{ dialogHeader: 'Re-Sync Record' }"
  [isOpen]="isReSyncPopupVisible"
  (confirmed)="onReSyncPopupConfirm($event)"
>
  <span>
    Re-syncing the record will override all existing data in both office and vessel. This action cannot be reversed. Are you sure you want
    to proceed?
  </span>
</jb-drydock-simple-confirmation-popup>

<jb-drydock-rework-popup
  [isOpen]="isReworkPopupVisible"
  (closeDialog)="onReworkDone($event)"
></jb-drydock-rework-popup>
