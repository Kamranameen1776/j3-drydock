<jb-task-manager-details
  *ngIf="sectionsConfig"
  [topSectionConfig]="topSectionConfig"
  [sectionsConfig]="sectionsConfig"
  [tmDetails]="tmDetails"
  [moduleCode]="moduleCode"
  [functionCode]="functionCode"
  [hideAuditTrail]="true"
  [hideAttachments]="true"
  [showExport]="true"
  [isViewRight]="canView"
  (onWorkflowActions)="onWorkflowAction($event)"
  [templateRefObj]="{
    general: generalTab,
    specifications: specificationsTab,
    yard_selection: yardSelectionTab,
    project_monitoring: projectMonitoringTab,
    technical_specification: technical_specification,
    attachmentss: attachmentss,
    rfq: rfq,
    statement_of_facts: statement_of_facts,
    job_orders: job_orders,
    reporting: reportingTab
  }"
  [sectionHeaderTemplateRef]="{ technical_specification: specificationsButtonsTmpl }"
  [slideMenus]="menu"
>
  <ng-template
    #generalTab
    let-section
  >
    <ng-container [ngSwitch]="section.SectionCode">
      <div *ngSwitchCase="'tasks'">
        <!-- TODO add tasks component here -->
      </div>
    </ng-container>
  </ng-template>

  <ng-template
    #specificationsTab
    let-section
  >
    <ng-container [ngSwitch]="section.SectionCode">
      <div *ngSwitchCase="eSideMenuId.TechnicalSpecification">
        <div #technical_specification>
          <jb-specifications
            #specificationsComponent
            [projectId]="projectUid"
            [vesselUid]="vesselUid"
            [vesselType]="vesselType"
          ></jb-specifications>
        </div>
      </div>

      <div *ngSwitchCase="eSideMenuId.Attachments">
        <div #attachmentss>
          <jb-attachments
            *ngIf="attachmentConfig"
            #attachmentsComponent
            class="attachments"
            [attachConfig]="attachmentConfig"
            [onUploadBtn]="false"
            [defaultActions]="true"
          ></jb-attachments>
        </div>
      </div>
    </ng-container>
  </ng-template>

  <ng-template
    #yardSelectionTab
    let-section
  >
    <ng-container [ngSwitch]="section.SectionCode">
      <div *ngSwitchCase="eSideMenuId.RFQ">
        <div #rfq>
          <jb-drydock-rfq
            [projectId]="projectUid"
            #rfqComponent
          ></jb-drydock-rfq>
        </div>
      </div>
    </ng-container>
  </ng-template>

  <ng-template
    #projectMonitoringTab
    let-section
  >
    <ng-container [ngSwitch]="section.SectionCode">
      <div *ngSwitchCase="eSideMenuId.StatementOfFacts">
        <div #statement_of_facts>
          <jb-statement-of-facts [projectId]="projectUid"></jb-statement-of-facts>
        </div>
      </div>
      <div *ngSwitchCase="eSideMenuId.JobOrders">
        <div #job_orders>
          <jb-job-orders [projectId]="projectUid"></jb-job-orders>
        </div>
      </div>
    </ng-container>
  </ng-template>
</jb-task-manager-details>

<ng-template
  #reportingTab
  let-section
>
  <ng-container [ngSwitch]="section.SectionCode">
    <div *ngSwitchCase="eSideMenuId.DailyReports">
      <div #daily_reports>
        <jb-daily-reports
          #dailyReportsComponent
          [projectId]="projectUid"
        ></jb-daily-reports>
      </div>
    </div>
  </ng-container>
</ng-template>

<ng-template #specificationsButtonsTmpl>
  <jb-button
    type="NoButton"
    icon="icons8-anchor"
    label="Export"
  ></jb-button>
  <jb-split-button
    type="NoButton"
    label="Create new"
    [model]="specificationsCreateNewItems"
  ></jb-split-button>
</ng-template>
