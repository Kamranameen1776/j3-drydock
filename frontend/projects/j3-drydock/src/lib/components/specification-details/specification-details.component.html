<jb-task-manager-details
  *ngIf="sectionsConfig && canView"
  [topSectionConfig]="topSectionConfig"
  [sectionsConfig]="sectionsConfig"
  [tmDetails]="tmDetails"
  [moduleCode]="moduleCode"
  [functionCode]="functionCode"
  [hideAuditTrail]="true"
  [hideAttachments]="false"
  [showExport]="false"
  [isViewRight]="canView"
  (onWorkflowActions)="onWorkflowAction($event)"
  [templateRefObj]="{
    specificationDetails: specificationsDetailsTab,
    generalInformation: generalInformation,
    subItems: subItems,
    pmsJobs: pmsJobs,
    findings: findings,
    requisitions: requisitions
  }"
  [ignoreAccessRights]="true"
  [slideMenus]="menu"
>
  <ng-template
    #specificationsDetailsTab
    let-section
  >
    <ng-container [ngSwitch]="section.SectionCode">
      <div *ngSwitchCase="eSideMenuId.GeneralInformation">
        <div #generalInformation>
          <jb-specification-general-information
            #SpecificationGeneralInformationComponent
            *ngIf="specificationDetailsInfo"
            [specificationDetailsInfo]="specificationDetailsInfo"
            (formValue)="validateDetail($event)"
          ></jb-specification-general-information>
        </div>
      </div>
      <div *ngSwitchCase="eSideMenuId.SubItems">
        <div #subItems>
          <jb-specification-sub-items
            #SpecificationSubItemsComponent
            *ngIf="specificationDetailsInfo && accessRights.subItems.view"
            [specificationDetailsInfo]="specificationDetailsInfo"
          ></jb-specification-sub-items>
        </div>
      </div>
      <div *ngSwitchCase="eSideMenuId.PMSJobs">
        <div #pmsJobs>
          <jb-linked-pms-jobs-findings
            #PmsJobsComponent
            *ngIf="specificationDetailsInfo"
            [specificationDetailsInfo]="specificationDetailsInfo"
            (updateSelectedAmount)="updateSelectedAmount($event, eSpecificationDetailsPageMenuIds.PMSJobs)"
          ></jb-linked-pms-jobs-findings>
        </div>
      </div>
      <div *ngSwitchCase="eSideMenuId.Findings">
        <div #findings>
          <jb-linked-pms-jobs-findings
            #FindingsComponent
            *ngIf="specificationDetailsInfo"
            [specificationDetailsInfo]="specificationDetailsInfo"
            (updateSelectedAmount)="updateSelectedAmount($event, eSpecificationDetailsPageMenuIds.Findings)"
          ></jb-linked-pms-jobs-findings>
        </div>
      </div>
      <div *ngSwitchCase="eSideMenuId.Requisitions">
        <div #requisitions>
          <jb-specification-requisitions
            *ngIf="accessRights.requisitions.view"
            #SpecificationRequisitionsComponent
            [specificationUid]="specificationUid"
          ></jb-specification-requisitions>
        </div>
      </div>
    </ng-container>
  </ng-template>
</jb-task-manager-details>

<jb-progress-spinner
  class="progress-spinner"
  *ngIf="showLoader"
  [theme]="'figma'"
></jb-progress-spinner>

<jb-edit-sub-item-popup
    *ngIf="showEditSubItem"
    [isOpen]="!!showEditSubItem"
    [subItemDetails]="subItemDetails"
    [specificationUid]="specificationDetailsInfo.uid"
    (closeDialog)="closeDialog($event)"
></jb-edit-sub-item-popup>
